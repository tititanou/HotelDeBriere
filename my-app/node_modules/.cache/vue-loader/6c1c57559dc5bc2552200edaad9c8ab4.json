{"remainingRequest":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\src\\components\\AdminManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\src\\components\\AdminManage.vue","mtime":1598003420790},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgaXNDb25uZWN0ZWQ6IGZhbHNlLA0KICAgICAgICAgICAgaXNBZG1pbjogZmFsc2UsDQogICAgICAgICAgICB1c2VyOiAnJywNCiAgICAgICAgICAgIGN1cnJlbnRVOnsNCiAgICAgICAgICAgICAgICBmaXJzdG5hbWU6JycsDQogICAgICAgICAgICAgICAgbmFtZTonJywNCiAgICAgICAgICAgICAgICBhZG1pbjpmYWxzZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVkKCl7DQogICAgICAgIHRoaXMudXNlciA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcjsNCiAgICAgICAgaWYgKHRoaXMudXNlciAhPSBudWxsKXsNCiAgICAgICAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSB0cnVlOw0KICAgICAgICB9DQogICAgfSwNCiAgICBtb3VudGVkKCl7DQogICAgICAgIGxldCB2aWV3VXNlciA9IHRoaXM7DQogICAgICAgIHZpZXdVc2VyLnVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7DQogICAgICAgIGNvbnN0IHVzZXJzUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoInVzZXJzIik7DQogICAgICAgIHVzZXJzUmVmLm9uKCJ2YWx1ZSIsIHNuYXBzaG90ID0+IHsNCiAgICAgICAgICAgIGxldCBkYXRhID0gc25hcHNob3QudmFsKCk7DQogICAgICAgICAgICBsZXQgdXNlcnMgPSBbXTsNCiAgICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goa2V5ID0+ew0KICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gdmlld1VzZXIudXNlci51aWQpew0KICAgICAgICAgICAgICAgICAgICB1c2Vycy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogZGF0YVtrZXldLmZpcnN0bmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGRhdGFba2V5XS5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgYWRtaW46IGRhdGFba2V5XS5hZG1pbg0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGlmKHVzZXJzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICB2aWV3VXNlci5jdXJyZW50VS5maXJzdG5hbWUgPSB1c2Vyc1swXS5maXJzdG5hbWU7DQogICAgICAgICAgICAgICAgdmlld1VzZXIuY3VycmVudFUubmFtZSA9IHVzZXJzWzBdLm5hbWU7DQogICAgICAgICAgICAgICAgdmlld1VzZXIuY3VycmVudFUuYWRtaW4gPSB1c2Vyc1swXS5hZG1pbjsNCiAgICAgICAgICAgICAgICB2aWV3VXNlci5pc0FkbWluID0gdmlld1VzZXIuY3VycmVudFUuYWRtaW47DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0NCn0NCg=="},{"version":3,"sources":["AdminManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdminManage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <b-container>\r\n        <b-card title=\"Portail administrateur\" class=\"mb-4 \" v-if=\"isConnected && isAdmin\">\r\n            <p>Bienvenue {{currentU.firstname}}!</p>\r\n            <b-card-group deck>\r\n                <b-col>\r\n                    <b-row class=\"my-1\">\r\n                        <b-card title=\"Articles\">\r\n                            <b-col class=\"my-1\">\r\n                                <b-button variant=\"outline-secondary\" block href=\"newArticle\" size=\"lg\">Ajouter un article</b-button>    \r\n                            </b-col>\r\n                            <b-col class=\"my-1\">\r\n                                <b-button variant=\"outline-secondary\" block href=\"editArticle\" size=\"lg\">Modifier ou supprimer un article</b-button>    \r\n                            </b-col>\r\n                        </b-card>\r\n                    </b-row>\r\n                    \r\n                    <b-row class=\"my-1\">\r\n                        <b-card title=\"Evenements\">\r\n                            <b-col class=\"my-1\">\r\n                                <b-button variant=\"outline-secondary\" block href=\"#\" size=\"lg\">Ajouter un évènement</b-button>    \r\n                            </b-col>\r\n                            <b-col class=\"my-1\">\r\n                                <b-button variant=\"outline-secondary\" block href=\"#\" size=\"lg\">Modifier ou supprimer un évènement</b-button>    \r\n                            </b-col>\r\n                        </b-card>\r\n                        \r\n                    </b-row>\r\n                    \r\n                    <b-row class=\"my-1\">\r\n                        <b-card title=\"Publicité\">\r\n                            <b-col class=\"my-1\">\r\n                                <b-button variant=\"outline-secondary\" block href=\"#\" size=\"lg\">Ajouter une publicité</b-button>    \r\n                            </b-col>\r\n                            <b-col class=\"my-1\">\r\n                                <b-button variant=\"outline-secondary\" block href=\"#\" size=\"lg\">Modifier ou supprimer une publicité</b-button>    \r\n                            </b-col>\r\n                        </b-card>\r\n                    </b-row>\r\n                    \r\n                    <b-row class=\"my-1\">\r\n                        <b-card title=\"Gestion Utilisateurs\">\r\n                            <b-button variant=\"outline-secondary\" block href=\"gestionAdmins\" size=\"lg\">Gérer les administrateurs</b-button>\r\n                        </b-card>\r\n                    </b-row>\r\n                </b-col>\r\n            </b-card-group>\r\n        </b-card>\r\n        <b-card title=\"Portail administrateur\" class=\"mb-4 \" v-else-if=\"isConnected && !isAdmin\">\r\n            <p>Accès refusé! Vous devez être administrateur pour accéder au contenu de cette page.</p>\r\n            <b-button variant=\"primary\" href=\"/\">Retour à l'acceuil</b-button>\r\n        </b-card>\r\n        <b-card title=\"Portail administrateur\" class=\"mb-4 \" v-else>\r\n            <p>Accès refusé! Vous devez vous connecter.</p>\r\n            <b-button variant=\"primary\" href=\"/\">Retour à l'acceuil</b-button>\r\n            <b-button variant=\"primary\" href=\"inscriptionConnexion\">Se connecter</b-button>\r\n        </b-card>\r\n    </b-container>\r\n</template>\r\n\r\n<script>\r\nimport firebase from 'firebase'\r\nexport default {\r\n    data(){\r\n        return {\r\n            isConnected: false,\r\n            isAdmin: false,\r\n            user: '',\r\n            currentU:{\r\n                firstname:'',\r\n                name:'',\r\n                admin:false\r\n            }\r\n        }\r\n    },\r\n    created(){\r\n        this.user = firebase.auth().currentUser;\r\n        if (this.user != null){\r\n            this.isConnected = true;\r\n        }\r\n    },\r\n    mounted(){\r\n        let viewUser = this;\r\n        viewUser.user = firebase.auth().currentUser;\r\n        const usersRef = firebase.database().ref(\"users\");\r\n        usersRef.on(\"value\", snapshot => {\r\n            let data = snapshot.val();\r\n            let users = [];\r\n            Object.keys(data).forEach(key =>{\r\n                if (key == viewUser.user.uid){\r\n                    users.push({\r\n                        firstname: data[key].firstname,\r\n                        name: data[key].name,\r\n                        admin: data[key].admin\r\n                    });\r\n                }\r\n            });\r\n            if(users.length > 0) {\r\n                viewUser.currentU.firstname = users[0].firstname;\r\n                viewUser.currentU.name = users[0].name;\r\n                viewUser.currentU.admin = users[0].admin;\r\n                viewUser.isAdmin = viewUser.currentU.admin;\r\n            }\r\n        });\r\n    }\r\n}\r\n</script>"]}]}