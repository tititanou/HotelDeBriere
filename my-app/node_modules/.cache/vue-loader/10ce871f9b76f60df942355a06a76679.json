{"remainingRequest":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\src\\components\\newArticle.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\src\\components\\newArticle.vue","mtime":1598012355198},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UiOw0KaW1wb3J0IHsgVnVlRWRpdG9yIH0gZnJvbSAidnVlMi1lZGl0b3IiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBWdWVFZGl0b3IsDQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaXNDb25uZWN0ZWQ6IGZhbHNlLA0KICAgICAgaXNBZG1pbjogZmFsc2UsDQogICAgICB1c2VyOiAiIiwNCiAgICAgIGN1cnJlbnRVOiB7DQogICAgICAgIGZpcnN0bmFtZTogIiIsDQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICBhZG1pbjogZmFsc2UsDQogICAgICB9LA0KICAgICAgaW1hZ2VEYXRhOiBudWxsLA0KICAgICAgcGljdHVyZTogbnVsbCwNCiAgICAgIHVwbG9hZFZhbHVlOiAwLA0KICAgICAgZm9ybTogew0KICAgICAgICB0aXRsZTogIiIsDQogICAgICAgIHN1YnRpdGxlOiAiIiwNCiAgICAgICAgYWJzdHJhY3Q6ICIiLA0KICAgICAgICBjb250ZW50OiAiIiwNCiAgICAgICAgcmVsZWFzZURhdGU6ICIiLA0KICAgICAgICBhdXRvcjogIiIsDQogICAgICAgIHRhZ3M6IFtdLA0KICAgICAgICBwaWN0dXJlOiAiIiwNCiAgICAgICAgbWVkaWE6ICIiLA0KICAgICAgICBpczNEUmVhbDogZmFsc2UsDQogICAgICB9LA0KICAgICAgdGFnOiAiIiwNCiAgICAgIHByb3BUYWdzOiBbXSwNCiAgICAgIHNob3c6IHRydWUsDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLnVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7DQogICAgaWYgKHRoaXMudXNlciAhPSBudWxsKSB7DQogICAgICB0aGlzLmlzQ29ubmVjdGVkID0gdHJ1ZTsNCiAgICB9DQogICAgdGhpcy5kaXNwbGF5KHRoaXMucHJvcFRhZ3MpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZGlzcGxheShsaXN0KSB7DQogICAgICBsZXQgcmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoInRhZ3MiKTsNCiAgICAgIHJlZi5vbmNlKCJ2YWx1ZSIsIGZ1bmN0aW9uIChzbmFwc2hvdCkgew0KICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZFNuYXBzaG90KSB7DQogICAgICAgICAgdmFyIGNoaWxkS2V5ID0gY2hpbGRTbmFwc2hvdC5rZXk7DQogICAgICAgICAgY29uc29sZS5sb2coY2hpbGRLZXkpOw0KICAgICAgICAgIGxpc3QucHVzaChjaGlsZEtleSk7DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgICBjb25zb2xlLmxvZyhsaXN0Lmxlbmd0aCk7DQogICAgfSwNCiAgICBvblN1Ym1pdChldnQpIHsNCiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgLy9hbGVydChKU09OLnN0cmluZ2lmeSh0aGlzLmZvcm0pKQ0KICAgICAgaWYgKHRoaXMuZm9ybS5hYnN0cmFjdC5sZW5ndGggPT0gMCB8fCB0aGlzLmZvcm0uYWJzdHJhY3QubGVuZ3RoID4gMjgwKSB7DQogICAgICAgIGFsZXJ0KCJWb3VzIGRldmV6IMOpY3JpcmUgdW4gcsOpc3Vtw6kgZGUgMjgwIGNhcmFjdMOocmVzIG1heGltdW0uIik7DQogICAgICB9IGVsc2UgaWYgKHRoaXMuZm9ybS5jb250ZW50Lmxlbmd0aCA9PSAwKSB7DQogICAgICAgIGFsZXJ0KCJWb3VzIGRldmV6IMOpY3JpcmUgdW4gYXJ0aWNsZS4iKTsNCiAgICAgIH0gZWxzZSBpZiAodGhpcy5mb3JtLnJlbGVhc2VEYXRlLmxlbmd0aCA9PSAwKSB7DQogICAgICAgIGFsZXJ0KCJWb3VzIGRldmV6IGVudHJlciB1bmUgZGF0ZS4iKTsNCiAgICAgIH0gZWxzZSBpZiAodGhpcy5mb3JtLnBpY3R1cmUubGVuZ3RoID09IDApIHsNCiAgICAgICAgYWxlcnQoIlZvdXMgZGV2ZXogZW50cmVyIHVuZSBpbWFnZS4iKTsNCiAgICAgIH0gZWxzZSBpZiAodGhpcy5mb3JtLnRhZ3MubGVuZ3RoID09IDApIHsNCiAgICAgICAgYWxlcnQoIlZvdXMgZGV2ZXogZW50cmVyIGF1IG1vaW5zIHVuZSBjYXTDqWdvcmllLiIpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZvcm0udGFncy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGZpcmViYXNlDQogICAgICAgICAgICAuZGF0YWJhc2UoKQ0KICAgICAgICAgICAgLnJlZigidGFncy8iICsgdGhpcy5mb3JtLnRhZ3NbaV0pDQogICAgICAgICAgICAuc2V0KHsNCiAgICAgICAgICAgICAgdGFnOiB0aGlzLmZvcm0udGFnc1tpXSwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybS5jb250ZW50Lmxlbmd0aCk7DQogICAgICAgIGZpcmViYXNlDQogICAgICAgICAgLmRhdGFiYXNlKCkNCiAgICAgICAgICAucmVmKCJhcnRpY2xlcy8iKQ0KICAgICAgICAgIC5wdXNoKHsNCiAgICAgICAgICAgIHRpdGxlOiB0aGlzLmZvcm0udGl0bGUsDQogICAgICAgICAgICBzdWJ0aXRsZTogdGhpcy5mb3JtLnN1YnRpdGxlLA0KICAgICAgICAgICAgYWJzdHJhY3Q6IHRoaXMuZm9ybS5hYnN0cmFjdCwNCiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuZm9ybS5jb250ZW50LA0KICAgICAgICAgICAgcmVsZWFzZURhdGU6IHRoaXMuZm9ybS5yZWxlYXNlRGF0ZSwNCiAgICAgICAgICAgIGF1dG9yOiB0aGlzLmZvcm0uYXV0b3IsDQogICAgICAgICAgICB0YWdzOiB0aGlzLmZvcm0udGFncywNCiAgICAgICAgICAgIHBpY3R1cmU6IHRoaXMuZm9ybS5waWN0dXJlLA0KICAgICAgICAgICAgbWVkaWE6IHRoaXMuZm9ybS5tZWRpYSwNCiAgICAgICAgICAgIGlzM0RSZWFsOiB0aGlzLmZvcm0uaXMzRFJlYWwsDQogICAgICAgICAgfSkNCiAgICAgICAgICAudGhlbihhbGVydCgiVm90cmUgYXJ0aWNsZSBhIMOpdMOpIGNyw6nDqSBhdmVjIHN1Y2PDqHMuIikpOw0KICAgICAgfQ0KICAgIH0sDQogICAgb25SZXNldChldnQpIHsNCiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgLy8gUmVzZXQgb3VyIGZvcm0gdmFsdWVzDQogICAgICB0aGlzLmZvcm0udGl0bGUgPSAiIjsNCiAgICAgIHRoaXMuZm9ybS5zdWJ0aXRsZSA9ICIiOw0KICAgICAgdGhpcy5mb3JtLmFic3RyYWN0ID0gIiI7DQogICAgICB0aGlzLmZvcm0uY29udGVudCA9ICIiOw0KICAgICAgdGhpcy5mb3JtLnJlbGVhc2VEYXRlID0gIiI7DQogICAgICB0aGlzLmZvcm0uYXV0b3IgPSAiIjsNCiAgICAgIHRoaXMuZm9ybS50YWdzID0gW107DQogICAgICB0aGlzLmZvcm0ucGljdHVyZSA9ICIiOw0KICAgICAgdGhpcy5mb3JtLm1lZGlhID0gIiI7DQogICAgICB0aGlzLmZvcm0uaXMzRFJlYWwgPSBmYWxzZTsNCiAgICAgIC8vIFRyaWNrIHRvIHJlc2V0L2NsZWFyIG5hdGl2ZSBicm93c2VyIGZvcm0gdmFsaWRhdGlvbiBzdGF0ZQ0KICAgICAgdGhpcy5zaG93ID0gZmFsc2U7DQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuc2hvdyA9IHRydWU7DQogICAgICB9KTsNCiAgICB9LA0KICAgIHByZXZpZXdJbWFnZShldmVudCkgew0KICAgICAgdGhpcy51cGxvYWRWYWx1ZSA9IDA7DQogICAgICB0aGlzLnBpY3R1cmUgPSBudWxsOw0KICAgICAgdGhpcy5pbWFnZURhdGEgPSBldmVudC50YXJnZXQuZmlsZXNbMF07DQogICAgfSwNCiAgICBvblVwbG9hZCgpIHsNCiAgICAgIHRoaXMucGljdHVyZSA9IG51bGw7DQogICAgICBjb25zdCBzdG9yYWdlUmVmID0gZmlyZWJhc2UNCiAgICAgICAgLnN0b3JhZ2UoKQ0KICAgICAgICAucmVmKGAke3RoaXMuaW1hZ2VEYXRhLm5hbWV9YCkNCiAgICAgICAgLnB1dCh0aGlzLmltYWdlRGF0YSk7DQogICAgICBzdG9yYWdlUmVmLm9uKA0KICAgICAgICBgc3RhdGVfY2hhbmdlZGAsDQogICAgICAgIChzbmFwc2hvdCkgPT4gew0KICAgICAgICAgIHRoaXMudXBsb2FkVmFsdWUgPQ0KICAgICAgICAgICAgKHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzKSAqIDEwMDsNCiAgICAgICAgfSwNCiAgICAgICAgKGVycm9yKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7DQogICAgICAgIH0sDQogICAgICAgICgpID0+IHsNCiAgICAgICAgICB0aGlzLnVwbG9hZFZhbHVlID0gMTAwOw0KICAgICAgICAgIHN0b3JhZ2VSZWYuc25hcHNob3QucmVmLmdldERvd25sb2FkVVJMKCkudGhlbigodXJsKSA9PiB7DQogICAgICAgICAgICB0aGlzLmZvcm0ucGljdHVyZSA9IHVybDsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICB9LA0KICAgIGFkZFRhZyh0YWcpIHsNCiAgICAgIGlmICh0YWcgIT0gIiIpIHsNCiAgICAgICAgaWYgKHRoaXMuZm9ybS50YWdzLmxlbmd0aCA8IDMpIHsNCiAgICAgICAgICBsZXQgbmV3VGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgdGhpcy5mb3JtLnRhZ3MucHVzaChuZXdUYWcpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICByZW1vdmVUYWcoaW5kZXgpIHsNCiAgICAgIHRoaXMuZm9ybS50YWdzLnNwbGljZShpbmRleCwgMSk7DQogICAgfSwNCiAgICB0YWdFeGlzdHModGFnKSB7DQogICAgICByZXR1cm4gdGhpcy5mb3JtLnRhZ3MuaW5kZXhPZih0YWcpICE9PSAtMTsNCiAgICB9LA0KICAgIGhhbmRsZVR5cGluZyhlKSB7DQogICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykgew0KICAgICAgICBsZXQgdGFnID0gdGhpcy50YWcucmVwbGFjZSgvLC9nLCAiIik7DQogICAgICAgIGlmICghdGhpcy50YWdFeGlzdHModGFnKSkgew0KICAgICAgICAgIHRoaXMuYWRkVGFnKHRhZyk7DQogICAgICAgICAgdGhpcy50YWcgPSAiIjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlQXJ0aWNsZSgpIHsNCiAgICAgIC8vdmFyIHVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7DQogICAgICAvL2NvbnNvbGUubG9nKHVzZXIudWlkKTsNCiAgICB9LA0KICB9LA0KDQogIG1vdW50ZWQoKSB7DQogICAgbGV0IHZpZXdVc2VyID0gdGhpczsNCiAgICB2aWV3VXNlci51c2VyID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyOw0KICAgIGNvbnN0IHVzZXJzUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoInVzZXJzIik7DQogICAgdXNlcnNSZWYub24oInZhbHVlIiwgKHNuYXBzaG90KSA9PiB7DQogICAgICBsZXQgZGF0YSA9IHNuYXBzaG90LnZhbCgpOw0KICAgICAgbGV0IHVzZXJzID0gW107DQogICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKChrZXkpID0+IHsNCiAgICAgICAgaWYgKGtleSA9PSB2aWV3VXNlci51c2VyLnVpZCkgew0KICAgICAgICAgIHVzZXJzLnB1c2goew0KICAgICAgICAgICAgZmlyc3RuYW1lOiBkYXRhW2tleV0uZmlyc3RuYW1lLA0KICAgICAgICAgICAgbmFtZTogZGF0YVtrZXldLm5hbWUsDQogICAgICAgICAgICBhZG1pbjogZGF0YVtrZXldLmFkbWluLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIGlmICh1c2Vycy5sZW5ndGggPiAwKSB7DQogICAgICAgIHZpZXdVc2VyLmN1cnJlbnRVLmZpcnN0bmFtZSA9IHVzZXJzWzBdLmZpcnN0bmFtZTsNCiAgICAgICAgdmlld1VzZXIuY3VycmVudFUubmFtZSA9IHVzZXJzWzBdLm5hbWU7DQogICAgICAgIHZpZXdVc2VyLmN1cnJlbnRVLmFkbWluID0gdXNlcnNbMF0uYWRtaW47DQogICAgICAgIHZpZXdVc2VyLmlzQWRtaW4gPSB2aWV3VXNlci5jdXJyZW50VS5hZG1pbjsNCiAgICAgIH0NCiAgICB9KTsNCiAgfSwNCn07DQo="},{"version":3,"sources":["newArticle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"newArticle.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <b-container>\r\n    <div>\r\n      <h1>Création de l'article:</h1>\r\n      <div v-if=\"isConnected && isAdmin\">\r\n        <b-form v-on:keypress.enter.prevent @submit=\"onSubmit\" @reset=\"onReset\" v-if=\"show\">\r\n          <b-form-group label=\"Titre:\">\r\n            <b-form-input v-model=\"form.title\" type=\"text\" required placeholder=\"Titre\"></b-form-input>\r\n          </b-form-group>\r\n\r\n          <b-form-group label=\"Sous-titre:\" description=\"Facultatif\">\r\n            <b-form-input v-model=\"form.subtitle\" placeholder=\"Sous-titre\"></b-form-input>\r\n          </b-form-group>\r\n\r\n          <b-form-group label=\"Résumé:\">\r\n            <b-form-textarea v-model=\"form.abstract\" placeholder=\"Résumé\" rows=\"3\" max-rows=\"6\"></b-form-textarea>\r\n          </b-form-group>\r\n\r\n          <b-form-group label=\"Contenu de l'article:\">\r\n            <b-form>\r\n              <vue-editor\r\n                label=\"Contenu de l'article:\"\r\n                required\r\n                v-model=\"form.content\"\r\n                style=\"background-color: white;\"\r\n              ></vue-editor>\r\n            </b-form>\r\n          </b-form-group>\r\n\r\n          <b-form-group label=\"Date de mise en ligne:\">\r\n            <b-form-datepicker v-model=\"form.releaseDate\" required class=\"mb-2\"></b-form-datepicker>\r\n          </b-form-group>\r\n\r\n          <b-form-group label=\"Catégorie:\">\r\n            <b-form-input\r\n              placeholder=\"Ajouter une catégorie en appuyant sur Entrée\"\r\n              list=\"input-list\"\r\n              v-model=\"tag\"\r\n              @keyup=\"handleTyping\"\r\n            ></b-form-input>\r\n            <b-form-datalist id=\"input-list\" :options=\"propTags\"></b-form-datalist>\r\n            <div class=\"tags mt-2\">\r\n              <div\r\n                v-for=\"(_tag, index) in form.tags\"\r\n                :key=\"index\"\r\n                class=\"tag\"\r\n                @click=\"removeTag(index)\"\r\n              >{{ _tag }}</div>\r\n            </div>\r\n          </b-form-group>\r\n\r\n          <b-form-group label=\"Auteur de l'article:\">\r\n            <b-form-input v-model=\"form.autor\" type=\"text\" required placeholder=\"Auteur\"></b-form-input>\r\n          </b-form-group>\r\n\r\n          <b-form-group label=\"Photo de présentation:\">\r\n            <b-form v-model=\"picture\">\r\n              <div>\r\n                <input type=\"file\" @change=\"previewImage\" accept=\"image/*\" />\r\n              </div>\r\n              <div>\r\n                <p>\r\n                  Progression: {{uploadValue.toFixed()+\"%\"}}\r\n                  <progress\r\n                    id=\"progress\"\r\n                    :value=\"uploadValue\"\r\n                    max=\"100\"\r\n                  ></progress>\r\n                </p>\r\n              </div>\r\n              <div v-if=\"imageData!=null\">\r\n                <img class=\"preview\" required :src=\"form.picture\" />\r\n                <br />\r\n                <b-button variant=\"primary\" @click.prevent=\"onUpload\">Importer l'image</b-button>\r\n              </div>\r\n            </b-form>\r\n          </b-form-group>\r\n\r\n          <b-form-group label=\"Média de présentation:\" description=\"facultatif\">\r\n            <b-form-input v-model=\"form.media\" type=\"text\" placeholder=\"Lien vers un média\"></b-form-input>\r\n            <b-checkbox v-model=\"form.is3DReal\">Cocher si c'est une réalisation 3D SketchFab</b-checkbox>\r\n          </b-form-group>\r\n\r\n          <div class=\"mt-5\">\r\n            <h1>Prévisualisation de l'article:</h1>\r\n            <div>\r\n              <h2>Vignette:</h2>\r\n              <b-card\r\n                :title=\"form.title\"\r\n                :img-src=\"form.picture\"\r\n                img-alt=\"Image\"\r\n                img-top\r\n                img-width=\"max-whidth: 50rem\"\r\n                img-height=\"max-height: 50rem\"\r\n                tag=\"article\"\r\n                style=\"max-width: 50rem;\"\r\n                class=\"mb-4\"\r\n              >\r\n                <b-card-text>{{form.abstract}}</b-card-text>\r\n\r\n                <b-button href=\"#\" variant=\"primary\">Lire la suite</b-button>\r\n              </b-card>\r\n            </div>\r\n            <div>\r\n              <h2>Page Complète:</h2>\r\n              <b-card>\r\n                <div\r\n                  v-if=\"form.media && form.is3DReal == false\"\r\n                  class=\"mb-4 embed-responsive embed-responsive-16by9\"\r\n                >\r\n                  <iframe class=\"col-12 embed-responsive-item\" :src=\"form.media\" frameborder=\"0\"></iframe>\r\n                </div>\r\n                <div v-if=\"form.media && form.is3DReal\">\r\n                  <div class=\"sketchfab-embed-wrapper mb-4 embed-responsive embed-responsive-16by9\">\r\n                    <iframe\r\n                      class=\"col-12 embed-responsive-item\"\r\n                      title=\"A 3D model\"\r\n                      :src=\"form.media\"\r\n                      frameborder=\"0\"\r\n                      allow=\"autoplay; fullscreen; vr\"\r\n                      mozallowfullscreen=\"true\"\r\n                      webkitallowfullscreen=\"true\"\r\n                    ></iframe>\r\n                  </div>\r\n                </div>\r\n                <div v-else>\r\n                  <img :src=\"form.picture\" class=\"col-12\" />\r\n                </div>\r\n                <div>\r\n                  <h1>{{form.title}}</h1>\r\n                  <h3>{{form.subtitle}}</h3>\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">Mis en ligne le: {{form.releaseDate}}</div>\r\n                    <div class=\"col\">Ecrit part: {{form.autor}}</div>\r\n                    <div class=\"col\">\r\n                      Catégories:\r\n                      <div class=\"raw\" v-for=\"(_tag, index) in form.tags\" :key=\"index\">{{_tag}}</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div v-html=\"form.content\"></div>\r\n                </div>\r\n              </b-card>\r\n            </div>\r\n          </div>\r\n          <b-button class=\"mx-3 my-3\" type=\"submit\" variant=\"primary\">Enregistrer</b-button>\r\n          <b-button type=\"reset\" variant=\"danger\">Recommencer l'article</b-button>\r\n        </b-form>\r\n\r\n        <!--<b-card class=\"mt-3\" header=\"Form Data Result\">\r\n          <pre class=\"m-0\">{{ form.tags }}</pre>\r\n        </b-card>-->\r\n      </div>\r\n      <b-card title=\"Portail administrateur\" class=\"mb-4\" v-else-if=\"isConnected && !isAdmin\">\r\n        <p>Accès refusé! Vous devez être administrateur pour accéder au contenu de cette page.</p>\r\n        <b-button variant=\"primary\" href=\"/\">Retour à l'acceuil</b-button>\r\n      </b-card>\r\n      <b-card title=\"Portail administrateur\" class=\"mb-4\" v-else>\r\n        <p>Accès refusé! Vous devez vous connecter.</p>\r\n        <b-button variant=\"primary\" href=\"/\">Retour à l'acceuil</b-button>\r\n        <b-button variant=\"primary\" href=\"inscriptionConnexion\">Se connecter</b-button>\r\n      </b-card>\r\n    </div>\r\n  </b-container>\r\n</template>\r\n\r\n<script>\r\nimport firebase from \"firebase\";\r\nimport { VueEditor } from \"vue2-editor\";\r\n\r\nexport default {\r\n  components: {\r\n    VueEditor,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      isConnected: false,\r\n      isAdmin: false,\r\n      user: \"\",\r\n      currentU: {\r\n        firstname: \"\",\r\n        name: \"\",\r\n        admin: false,\r\n      },\r\n      imageData: null,\r\n      picture: null,\r\n      uploadValue: 0,\r\n      form: {\r\n        title: \"\",\r\n        subtitle: \"\",\r\n        abstract: \"\",\r\n        content: \"\",\r\n        releaseDate: \"\",\r\n        autor: \"\",\r\n        tags: [],\r\n        picture: \"\",\r\n        media: \"\",\r\n        is3DReal: false,\r\n      },\r\n      tag: \"\",\r\n      propTags: [],\r\n      show: true,\r\n    };\r\n  },\r\n  created() {\r\n    this.user = firebase.auth().currentUser;\r\n    if (this.user != null) {\r\n      this.isConnected = true;\r\n    }\r\n    this.display(this.propTags);\r\n  },\r\n  methods: {\r\n    display(list) {\r\n      let ref = firebase.database().ref(\"tags\");\r\n      ref.once(\"value\", function (snapshot) {\r\n        snapshot.forEach(function (childSnapshot) {\r\n          var childKey = childSnapshot.key;\r\n          console.log(childKey);\r\n          list.push(childKey);\r\n        });\r\n      });\r\n      console.log(list.length);\r\n    },\r\n    onSubmit(evt) {\r\n      evt.preventDefault();\r\n      //alert(JSON.stringify(this.form))\r\n      if (this.form.abstract.length == 0 || this.form.abstract.length > 280) {\r\n        alert(\"Vous devez écrire un résumé de 280 caractères maximum.\");\r\n      } else if (this.form.content.length == 0) {\r\n        alert(\"Vous devez écrire un article.\");\r\n      } else if (this.form.releaseDate.length == 0) {\r\n        alert(\"Vous devez entrer une date.\");\r\n      } else if (this.form.picture.length == 0) {\r\n        alert(\"Vous devez entrer une image.\");\r\n      } else if (this.form.tags.length == 0) {\r\n        alert(\"Vous devez entrer au moins une catégorie.\");\r\n      } else {\r\n        for (let i = 0; i < this.form.tags.length; i++) {\r\n          firebase\r\n            .database()\r\n            .ref(\"tags/\" + this.form.tags[i])\r\n            .set({\r\n              tag: this.form.tags[i],\r\n            });\r\n        }\r\n        console.log(this.form.content.length);\r\n        firebase\r\n          .database()\r\n          .ref(\"articles/\")\r\n          .push({\r\n            title: this.form.title,\r\n            subtitle: this.form.subtitle,\r\n            abstract: this.form.abstract,\r\n            content: this.form.content,\r\n            releaseDate: this.form.releaseDate,\r\n            autor: this.form.autor,\r\n            tags: this.form.tags,\r\n            picture: this.form.picture,\r\n            media: this.form.media,\r\n            is3DReal: this.form.is3DReal,\r\n          })\r\n          .then(alert(\"Votre article a été créé avec succès.\"));\r\n      }\r\n    },\r\n    onReset(evt) {\r\n      evt.preventDefault();\r\n      // Reset our form values\r\n      this.form.title = \"\";\r\n      this.form.subtitle = \"\";\r\n      this.form.abstract = \"\";\r\n      this.form.content = \"\";\r\n      this.form.releaseDate = \"\";\r\n      this.form.autor = \"\";\r\n      this.form.tags = [];\r\n      this.form.picture = \"\";\r\n      this.form.media = \"\";\r\n      this.form.is3DReal = false;\r\n      // Trick to reset/clear native browser form validation state\r\n      this.show = false;\r\n      this.$nextTick(() => {\r\n        this.show = true;\r\n      });\r\n    },\r\n    previewImage(event) {\r\n      this.uploadValue = 0;\r\n      this.picture = null;\r\n      this.imageData = event.target.files[0];\r\n    },\r\n    onUpload() {\r\n      this.picture = null;\r\n      const storageRef = firebase\r\n        .storage()\r\n        .ref(`${this.imageData.name}`)\r\n        .put(this.imageData);\r\n      storageRef.on(\r\n        `state_changed`,\r\n        (snapshot) => {\r\n          this.uploadValue =\r\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n        },\r\n        (error) => {\r\n          console.log(error.message);\r\n        },\r\n        () => {\r\n          this.uploadValue = 100;\r\n          storageRef.snapshot.ref.getDownloadURL().then((url) => {\r\n            this.form.picture = url;\r\n          });\r\n        }\r\n      );\r\n    },\r\n    addTag(tag) {\r\n      if (tag != \"\") {\r\n        if (this.form.tags.length < 3) {\r\n          let newTag = tag.toLowerCase();\r\n          this.form.tags.push(newTag);\r\n        }\r\n      }\r\n    },\r\n    removeTag(index) {\r\n      this.form.tags.splice(index, 1);\r\n    },\r\n    tagExists(tag) {\r\n      return this.form.tags.indexOf(tag) !== -1;\r\n    },\r\n    handleTyping(e) {\r\n      if (e.keyCode === 13) {\r\n        let tag = this.tag.replace(/,/g, \"\");\r\n        if (!this.tagExists(tag)) {\r\n          this.addTag(tag);\r\n          this.tag = \"\";\r\n        }\r\n      }\r\n    },\r\n    createArticle() {\r\n      //var user = firebase.auth().currentUser;\r\n      //console.log(user.uid);\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    let viewUser = this;\r\n    viewUser.user = firebase.auth().currentUser;\r\n    const usersRef = firebase.database().ref(\"users\");\r\n    usersRef.on(\"value\", (snapshot) => {\r\n      let data = snapshot.val();\r\n      let users = [];\r\n      Object.keys(data).forEach((key) => {\r\n        if (key == viewUser.user.uid) {\r\n          users.push({\r\n            firstname: data[key].firstname,\r\n            name: data[key].name,\r\n            admin: data[key].admin,\r\n          });\r\n        }\r\n      });\r\n      if (users.length > 0) {\r\n        viewUser.currentU.firstname = users[0].firstname;\r\n        viewUser.currentU.name = users[0].name;\r\n        viewUser.currentU.admin = users[0].admin;\r\n        viewUser.isAdmin = viewUser.currentU.admin;\r\n      }\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped=\"\">\r\nimg.preview {\r\n  width: 200px;\r\n}\r\n\r\nimg.view {\r\n  width: auto;\r\n}\r\n</style>"]}]}