{"remainingRequest":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\src\\views\\EditArticle.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\src\\views\\EditArticle.vue","mtime":1598003420789},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKaW1wb3J0IEVkaXQgZnJvbSAiQC9jb21wb25lbnRzL2VkaXRBcnRpY2xlLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBFZGl0OiBFZGl0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXJ0aWNsZXNMaXN0OiBbXSwKICAgICAgaXNDb25uZWN0ZWQ6IGZhbHNlLAogICAgICBpc0FkbWluOiBmYWxzZSwKICAgICAgdXNlcjogJycsCiAgICAgIGN1cnJlbnRVOiB7CiAgICAgICAgZmlyc3RuYW1lOiAnJywKICAgICAgICBuYW1lOiAnJywKICAgICAgICBhZG1pbjogZmFsc2UKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmFydGljbGVzTGlzdCA9IHRoaXMuZGlzcGxheSgpOwogICAgY29uc29sZS5sb2coImxlIHBiIGVzdCBpY2khIik7CiAgICBjb25zb2xlLmxvZygiMTogIiArIHRoaXMuYXJ0aWNsZXNMaXN0Lmxlbmd0aCk7CiAgICB0aGlzLnVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7CgogICAgaWYgKHRoaXMudXNlciAhPSBudWxsKSB7CiAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSB0cnVlOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciB2aWV3VXNlciA9IHRoaXM7CiAgICB2aWV3VXNlci51c2VyID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyOwogICAgdmFyIHVzZXJzUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoInVzZXJzIik7CiAgICB1c2Vyc1JlZi5vbigidmFsdWUiLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgdmFyIGRhdGEgPSBzbmFwc2hvdC52YWwoKTsKICAgICAgdmFyIHVzZXJzID0gW107CiAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlmIChrZXkgPT0gdmlld1VzZXIudXNlci51aWQpIHsKICAgICAgICAgIHVzZXJzLnB1c2goewogICAgICAgICAgICBmaXJzdG5hbWU6IGRhdGFba2V5XS5maXJzdG5hbWUsCiAgICAgICAgICAgIG5hbWU6IGRhdGFba2V5XS5uYW1lLAogICAgICAgICAgICBhZG1pbjogZGF0YVtrZXldLmFkbWluCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKHVzZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICB2aWV3VXNlci5jdXJyZW50VS5maXJzdG5hbWUgPSB1c2Vyc1swXS5maXJzdG5hbWU7CiAgICAgICAgdmlld1VzZXIuY3VycmVudFUubmFtZSA9IHVzZXJzWzBdLm5hbWU7CiAgICAgICAgdmlld1VzZXIuY3VycmVudFUuYWRtaW4gPSB1c2Vyc1swXS5hZG1pbjsKICAgICAgICB2aWV3VXNlci5pc0FkbWluID0gdmlld1VzZXIuY3VycmVudFUuYWRtaW47CiAgICAgIH0KICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgZGlzcGxheTogZnVuY3Rpb24gZGlzcGxheSgpIHsKICAgICAgdmFyIGxpc3QgPSBbXTsKICAgICAgdmFyIHJlZiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCJhcnRpY2xlcyIpOwogICAgICByZWYub25jZSgidmFsdWUiLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZFNuYXBzaG90KSB7CiAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBjaGlsZFNuYXBzaG90LmtleTsKICAgICAgICAgIHZhciBjaGlsZERhdGEgPSBjaGlsZFNuYXBzaG90LnZhbCgpOwogICAgICAgICAgdmFyIGFydGljbGUgPSB7CiAgICAgICAgICAgIGlkOiBjaGlsZEtleSwKICAgICAgICAgICAgdGl0bGU6IGNoaWxkRGF0YS50aXRsZSwKICAgICAgICAgICAgcmVsZWFzZURhdGU6IGNoaWxkRGF0YS5yZWxlYXNlRGF0ZQogICAgICAgICAgfTsKICAgICAgICAgIGNvbnNvbGUubG9nKGFydGljbGUpOwogICAgICAgICAgbGlzdC5wdXNoKGFydGljbGUpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgY29uc29sZS5sb2cobGlzdC5sZW5ndGgpOwogICAgICByZXR1cm4gbGlzdDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["EditArticle.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <b-container>\r\n    <div class=\"row my-5\">\r\n      <h1>Articles:</h1>\r\n    </div>\r\n    <div v-if=\"isConnected && isAdmin\">\r\n      <Edit\r\n        v-for=\"articleI in articlesList\"\r\n        :article=\"articleI\"\r\n        :key=\"articleI.id\"\r\n        :articlesList=\"articlesList\"\r\n      />\r\n    </div>\r\n    <b-card class=\"mb-4 \" v-else-if=\"isConnected && !isAdmin\">\r\n      <p>Accès refusé! Vous devez être administrateur pour accéder au contenu de cette page.</p>\r\n      <b-button variant=\"primary\" href=\"/\">Retour à l'acceuil</b-button>\r\n    </b-card>\r\n    <b-card class=\"mb-4 \" v-else>\r\n      <p>Accès refusé! Vous devez vous connecter.</p>\r\n      <b-button variant=\"primary\" href=\"/\">Retour à l'acceuil</b-button>\r\n      <b-button variant=\"primary\" href=\"inscriptionConnexion\">Se connecter</b-button>\r\n    </b-card>\r\n  </b-container>\r\n</template>\r\n\r\n\r\n<script>\r\nimport firebase from \"firebase\";\r\nimport Edit from \"@/components/editArticle.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    Edit,\r\n  },\r\n  data() {\r\n    return {\r\n      articlesList: [],\r\n      isConnected: false,\r\n      isAdmin: false,\r\n      user: '',\r\n      currentU:{\r\n        firstname:'',\r\n        name:'',\r\n        admin:false\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.articlesList = this.display();\r\n    console.log(\"le pb est ici!\");\r\n    console.log(\"1: \" + this.articlesList.length);\r\n    this.user = firebase.auth().currentUser;\r\n    if (this.user != null){\r\n      this.isConnected = true;\r\n    }\r\n  },\r\n  mounted: function () {\r\n    let viewUser = this;\r\n        viewUser.user = firebase.auth().currentUser;\r\n        const usersRef = firebase.database().ref(\"users\");\r\n        usersRef.on(\"value\", snapshot => {\r\n            let data = snapshot.val();\r\n            let users = [];\r\n            Object.keys(data).forEach(key =>{\r\n                if (key == viewUser.user.uid){\r\n                    users.push({\r\n                        firstname: data[key].firstname,\r\n                        name: data[key].name,\r\n                        admin: data[key].admin\r\n                    });\r\n                }\r\n            });\r\n            if(users.length > 0) {\r\n                viewUser.currentU.firstname = users[0].firstname;\r\n                viewUser.currentU.name = users[0].name;\r\n                viewUser.currentU.admin = users[0].admin;\r\n                viewUser.isAdmin = viewUser.currentU.admin;\r\n            }\r\n        });\r\n  },\r\n  methods: {\r\n    display() {\r\n      var list = [];\r\n      let ref = firebase.database().ref(\"articles\");\r\n      ref.once(\"value\", function (snapshot) {\r\n        snapshot.forEach(function (childSnapshot) {\r\n          var childKey = childSnapshot.key;\r\n          var childData = childSnapshot.val();\r\n          const article = {\r\n            id: childKey,\r\n            title: childData.title,\r\n            releaseDate: childData.releaseDate,\r\n          };\r\n          console.log(article);\r\n          list.push(article);\r\n        });\r\n      });\r\n      console.log(list.length);\r\n      return list;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style> "],"sourceRoot":"src/views"}]}