{"remainingRequest":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\src\\components\\AdminManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\src\\components\\AdminManage.vue","mtime":1597841091655},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0Nvbm5lY3RlZDogZmFsc2UsCiAgICAgIGlzQWRtaW46IGZhbHNlLAogICAgICB1c2VyOiAnJywKICAgICAgY3VycmVudFU6IHsKICAgICAgICBmaXJzdG5hbWU6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGFkbWluOiBmYWxzZQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMudXNlciA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcjsKCiAgICBpZiAodGhpcy51c2VyICE9IG51bGwpIHsKICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IHRydWU7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIHZpZXdVc2VyID0gdGhpczsKICAgIHZpZXdVc2VyLnVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7CiAgICB2YXIgdXNlcnNSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigidXNlcnMiKTsKICAgIHVzZXJzUmVmLm9uKCJ2YWx1ZSIsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICB2YXIgZGF0YSA9IHNuYXBzaG90LnZhbCgpOwogICAgICB2YXIgdXNlcnMgPSBbXTsKICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKGtleSA9PSB2aWV3VXNlci51c2VyLnVpZCkgewogICAgICAgICAgdXNlcnMucHVzaCh7CiAgICAgICAgICAgIGZpcnN0bmFtZTogZGF0YVtrZXldLmZpcnN0bmFtZSwKICAgICAgICAgICAgbmFtZTogZGF0YVtrZXldLm5hbWUsCiAgICAgICAgICAgIGFkbWluOiBkYXRhW2tleV0uYWRtaW4KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAodXNlcnMubGVuZ3RoID4gMCkgewogICAgICAgIHZpZXdVc2VyLmN1cnJlbnRVLmZpcnN0bmFtZSA9IHVzZXJzWzBdLmZpcnN0bmFtZTsKICAgICAgICB2aWV3VXNlci5jdXJyZW50VS5uYW1lID0gdXNlcnNbMF0ubmFtZTsKICAgICAgICB2aWV3VXNlci5jdXJyZW50VS5hZG1pbiA9IHVzZXJzWzBdLmFkbWluOwogICAgICAgIHZpZXdVc2VyLmlzQWRtaW4gPSB2aWV3VXNlci5jdXJyZW50VS5hZG1pbjsKICAgICAgfQogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["AdminManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA,OAAA,QAAA,MAAA,UAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA,KAFA;AAGA,MAAA,IAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA;AACA,QAAA,SAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,KAAA,EAAA;AAHA;AAJA,KAAA;AAUA,GAZA;AAaA,EAAA,OAbA,qBAaA;AACA,SAAA,IAAA,GAAA,QAAA,CAAA,IAAA,GAAA,WAAA;;AACA,QAAA,KAAA,IAAA,IAAA,IAAA,EAAA;AACA,WAAA,WAAA,GAAA,IAAA;AACA;AACA,GAlBA;AAmBA,EAAA,OAnBA,qBAmBA;AACA,QAAA,QAAA,GAAA,IAAA;AACA,IAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,GAAA,WAAA;AACA,QAAA,QAAA,GAAA,QAAA,CAAA,QAAA,GAAA,GAAA,CAAA,OAAA,CAAA;AACA,IAAA,QAAA,CAAA,EAAA,CAAA,OAAA,EAAA,UAAA,QAAA,EAAA;AACA,UAAA,IAAA,GAAA,QAAA,CAAA,GAAA,EAAA;AACA,UAAA,KAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,IAAA,QAAA,CAAA,IAAA,CAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,IAAA,CAAA;AACA,YAAA,SAAA,EAAA,IAAA,CAAA,GAAA,CAAA,CAAA,SADA;AAEA,YAAA,IAAA,EAAA,IAAA,CAAA,GAAA,CAAA,CAAA,IAFA;AAGA,YAAA,KAAA,EAAA,IAAA,CAAA,GAAA,CAAA,CAAA;AAHA,WAAA;AAKA;AACA,OARA;;AASA,UAAA,KAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,QAAA,QAAA,CAAA,QAAA,CAAA,SAAA,GAAA,KAAA,CAAA,CAAA,CAAA,CAAA,SAAA;AACA,QAAA,QAAA,CAAA,QAAA,CAAA,IAAA,GAAA,KAAA,CAAA,CAAA,CAAA,CAAA,IAAA;AACA,QAAA,QAAA,CAAA,QAAA,CAAA,KAAA,GAAA,KAAA,CAAA,CAAA,CAAA,CAAA,KAAA;AACA,QAAA,QAAA,CAAA,OAAA,GAAA,QAAA,CAAA,QAAA,CAAA,KAAA;AACA;AACA,KAlBA;AAmBA;AA1CA,CAAA","sourcesContent":["<template>\r\n    <b-container>\r\n        <b-card title=\"Portail administrateur\" class=\"mb-4 \" v-if=\"isConnected && isAdmin\">\r\n            <p>Bienvenue {{currentU.firstname}}!</p>\r\n            <b-card-group deck>\r\n                <b-col>\r\n                    <b-row class=\"my-1\">\r\n                        <b-card title=\"Articles\">\r\n                            <b-col class=\"my-1\">\r\n                                <b-button variant=\"outline-secondary\" block href=\"newArticle\" size=\"lg\">Ajouter un article</b-button>    \r\n                            </b-col>\r\n                            <b-col class=\"my-1\">\r\n                                <b-button variant=\"outline-secondary\" block href=\"#\" size=\"lg\">Modifier ou supprimer un article</b-button>    \r\n                            </b-col>\r\n                        </b-card>\r\n                    </b-row>\r\n                    \r\n                    <b-row class=\"my-1\">\r\n                        <b-card title=\"Evenements\">\r\n                            <b-col class=\"my-1\">\r\n                                <b-button variant=\"outline-secondary\" block href=\"#\" size=\"lg\">Ajouter un événement</b-button>    \r\n                            </b-col>\r\n                            <b-col class=\"my-1\">\r\n                                <b-button variant=\"outline-secondary\" block href=\"#\" size=\"lg\">Modifier ou supprimer un événement</b-button>    \r\n                            </b-col>\r\n                        </b-card>\r\n                        \r\n                    </b-row>\r\n                    \r\n                    <b-row class=\"my-1\">\r\n                        <b-card title=\"Publicité\">\r\n                            <b-col class=\"my-1\">\r\n                                <b-button variant=\"outline-secondary\" block href=\"#\" size=\"lg\">Ajouter une publicité</b-button>    \r\n                            </b-col>\r\n                            <b-col class=\"my-1\">\r\n                                <b-button variant=\"outline-secondary\" block href=\"#\" size=\"lg\">Modifier ou supprimer une publicité</b-button>    \r\n                            </b-col>\r\n                        </b-card>\r\n                    </b-row>\r\n                    \r\n                    <b-row class=\"my-1\">\r\n                        <b-card title=\"Gestion Utilisateurs\">\r\n                            <b-button variant=\"outline-secondary\" block href=\"#\" size=\"lg\">Gerer les administrateurs</b-button>\r\n                        </b-card>\r\n                    </b-row>\r\n                </b-col>\r\n            </b-card-group>\r\n        </b-card>\r\n        <b-card title=\"Portail administrateur\" class=\"mb-4 \" v-else-if=\"isConnected && !isAdmin\">\r\n            <p>Accès refusé! Vous devez être administrateur pour accéder au contenu de cette page.</p>\r\n            <b-button variant=\"primary\" href=\"/\">Retour à l'acceuil</b-button>\r\n        </b-card>\r\n        <b-card title=\"Portail administrateur\" class=\"mb-4 \" v-else>\r\n            <p>Accès refusé! Vous devez vous connecter.</p>\r\n            <b-button variant=\"primary\" href=\"/\">Retour à l'acceuil</b-button>\r\n            <b-button variant=\"primary\" href=\"inscriptionConnexion\">Se connecter</b-button>\r\n        </b-card>\r\n    </b-container>\r\n</template>\r\n\r\n<script>\r\nimport firebase from 'firebase'\r\nexport default {\r\n    data(){\r\n        return {\r\n            isConnected: false,\r\n            isAdmin: false,\r\n            user: '',\r\n            currentU:{\r\n                firstname:'',\r\n                name:'',\r\n                admin:false\r\n            }\r\n        }\r\n    },\r\n    created(){\r\n        this.user = firebase.auth().currentUser;\r\n        if (this.user != null){\r\n            this.isConnected = true;\r\n        }\r\n    },\r\n    mounted(){\r\n        let viewUser = this;\r\n        viewUser.user = firebase.auth().currentUser;\r\n        const usersRef = firebase.database().ref(\"users\");\r\n        usersRef.on(\"value\", snapshot => {\r\n            let data = snapshot.val();\r\n            let users = [];\r\n            Object.keys(data).forEach(key =>{\r\n                if (key == viewUser.user.uid){\r\n                    users.push({\r\n                        firstname: data[key].firstname,\r\n                        name: data[key].name,\r\n                        admin: data[key].admin\r\n                    });\r\n                }\r\n            });\r\n            if(users.length > 0) {\r\n                viewUser.currentU.firstname = users[0].firstname;\r\n                viewUser.currentU.name = users[0].name;\r\n                viewUser.currentU.admin = users[0].admin;\r\n                viewUser.isAdmin = viewUser.currentU.admin;\r\n            }\r\n        });\r\n    }\r\n}\r\n</script>"],"sourceRoot":"src/components"}]}