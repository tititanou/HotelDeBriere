{"remainingRequest":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\src\\components\\Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\src\\components\\Profile.vue","mtime":1598013263712},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r_kev\\Documents\\SiteWebStage\\HotelDeBriere\\my-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiCmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CmltcG9ydCAiZmlyZWJhc2UvYXV0aCI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29ubmVjdGVkOiBmYWxzZSwKICAgICAgdXNlcjoge30sCiAgICAgIHVzZXJzbGN0OiB7CiAgICAgICAgZmlyc3RuYW1lOiAnJywKICAgICAgICBuYW1lOiAnJywKICAgICAgICBhZG1pbjogZmFsc2UKICAgICAgfSwKICAgICAgaXNBZG1pbjogZmFsc2UsCiAgICAgIGZvcm06IHsKICAgICAgICBmaXJzdG5hbWU6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGVtYWlsOiAnJwogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuY29ubmVjdGVkID0gdGhpcy4kc3RvcmUuZ2V0dGVycy51c2VyLmxvZ2dlZEluOwogICAgY29uc29sZS5sb2coZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLmVtYWlsKTsKICAgIHRoaXMudXNlciA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcjsKICAgIHRoaXMuZm9ybS5lbWFpbCA9IHRoaXMudXNlci5lbWFpbDsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZVVzZXI6IGZ1bmN0aW9uIGNyZWF0ZVVzZXIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdXNlcmZiID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyOwogICAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigndXNlcnMvJyArIHVzZXJmYi51aWQpLnNldCh7CiAgICAgICAgZmlyc3RuYW1lOiB0aGlzLmZvcm0uZmlyc3RuYW1lLAogICAgICAgIG5hbWU6IHRoaXMuZm9ybS5uYW1lLAogICAgICAgIGVtYWlsOiB1c2VyZmIuZW1haWwsCiAgICAgICAgYWRtaW46IHRoaXMudXNlcnNsY3QuYWRtaW4KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgYWxlcnQoIlZvdHJlIHByb2ZpbCBhIMOpdMOpIG1pcyDDoCBqb3VyLiIpOwoKICAgICAgICBfdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgbmFtZTogImhvbWUiCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciB2aWV3VXNlciA9IHRoaXM7CiAgICB2YXIgdXNlcnNSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigidXNlcnMiKTsKICAgIHVzZXJzUmVmLm9uKCJ2YWx1ZSIsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICB2YXIgZGF0YSA9IHNuYXBzaG90LnZhbCgpOwogICAgICB2YXIgdXNlcnMgPSBbXTsKICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKGtleSA9PSB2aWV3VXNlci51c2VyLnVpZCkgewogICAgICAgICAgdXNlcnMucHVzaCh7CiAgICAgICAgICAgIGZpcnN0bmFtZTogZGF0YVtrZXldLmZpcnN0bmFtZSwKICAgICAgICAgICAgbmFtZTogZGF0YVtrZXldLm5hbWUsCiAgICAgICAgICAgIGFkbWluOiBkYXRhW2tleV0uYWRtaW4KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAodXNlcnMubGVuZ3RoID4gMCkgewogICAgICAgIHZpZXdVc2VyLnVzZXJzbGN0LmZpcnN0bmFtZSA9IHVzZXJzWzBdLmZpcnN0bmFtZTsKICAgICAgICB2aWV3VXNlci51c2Vyc2xjdC5uYW1lID0gdXNlcnNbMF0ubmFtZTsKICAgICAgICB2aWV3VXNlci51c2Vyc2xjdC5hZG1pbiA9IHVzZXJzWzBdLmFkbWluOwogICAgICAgIHZpZXdVc2VyLmZvcm0uZmlyc3RuYW1lID0gdmlld1VzZXIudXNlcnNsY3QuZmlyc3RuYW1lOwogICAgICAgIHZpZXdVc2VyLmZvcm0ubmFtZSA9IHZpZXdVc2VyLnVzZXJzbGN0Lm5hbWU7CiAgICAgICAgdmlld1VzZXIuaXNBZG1pbiA9IHZpZXdVc2VyLnVzZXJzbGN0LmFkbWluOwogICAgICB9CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <b-card title=\"Mon profil\" style=\"max-width: 45rem; min-width: 45rem; float:none;\" class=\"mb-4 center-block\">\r\n        <b-form @submit.prevent=\"createUser\">\r\n            <b-form-group label=\"Prénom:\" label-for=\"inputFirstname\">\r\n                <b-form-input id=\"inputFirstName\" v-model=\"form.firstname\" type=\"text\" required placeholder=\"Prénom\">{{userslct.firstname}}</b-form-input>\r\n            </b-form-group>\r\n            <b-form-group label=\"Nom\" label-for=\"inputName\">\r\n                <b-form-input id=\"inputName\" v-model=\"form.name\" type=\"text\" required placeholder=\"Nom\">{{userslct.name}}</b-form-input>\r\n            </b-form-group>\r\n            <b-form-group label=\"Email\" label-for=\"inputEmail\">\r\n                <b-form-input id=\"inputEmail\" v-model=\"form.email\" type=\"email\" disabled>{{user.email}}</b-form-input>\r\n            </b-form-group>\r\n            <div class=\"row\">\r\n                <b-button class=\"mx-3 col-2\" type=\"submit\" variant=\"primary\">Valider</b-button>\r\n                <div class=\"col-5\"></div>\r\n                <b-button right class=\"mx-2 col-4\" v-if=\"isAdmin\" variant=\"danger\" href=\"admin\">Espace Administrateur</b-button>\r\n            </div>\r\n            \r\n        </b-form>\r\n        \r\n    </b-card>\r\n</template>\r\n\r\n<script>\r\n//mport axios from \"axios\"\r\nimport firebase from \"firebase\"\r\nimport \"firebase/auth\"\r\nexport default {\r\n    data(){\r\n        return{\r\n            connected: false,\r\n            user: {},\r\n            userslct: {\r\n                firstname:'',\r\n                name: '',\r\n                admin: false\r\n            },\r\n            isAdmin: false,\r\n            form:{\r\n                firstname:'',\r\n                name:'',\r\n                email: ''\r\n            },\r\n        }\r\n    },\r\n    created(){\r\n        this.connected = this.$store.getters.user.loggedIn;\r\n        console.log(firebase.auth().currentUser.email)\r\n        this.user = firebase.auth().currentUser;\r\n        this.form.email = this.user.email;\r\n    },\r\n    methods:{\r\n        createUser(){\r\n            let userfb = firebase.auth().currentUser;\r\n            firebase.database().ref('users/' + userfb.uid).set({\r\n                firstname: this.form.firstname,\r\n                name: this.form.name,\r\n                email: userfb.email,\r\n                admin: this.userslct.admin\r\n            }).then(() => {\r\n                alert(\"Votre profil a été mis à jour.\")\r\n                this.$router.replace({ name: \"home\" })\r\n\r\n            });\r\n        },\r\n    },\r\n    mounted() {\r\n        let viewUser = this;\r\n        const usersRef = firebase.database().ref(\"users\");\r\n        usersRef.on(\"value\", snapshot => {\r\n            let data = snapshot.val();\r\n            let users = [];\r\n            Object.keys(data).forEach(key =>{\r\n                if (key == viewUser.user.uid){\r\n                    users.push({\r\n                        firstname: data[key].firstname,\r\n                        name: data[key].name,\r\n                        admin: data[key].admin\r\n                    });\r\n                }\r\n            });\r\n            if(users.length > 0) {\r\n                viewUser.userslct.firstname = users[0].firstname;\r\n                viewUser.userslct.name = users[0].name;\r\n                viewUser.userslct.admin = users[0].admin;\r\n                viewUser.form.firstname = viewUser.userslct.firstname;\r\n                viewUser.form.name = viewUser.userslct.name;\r\n                viewUser.isAdmin = viewUser.userslct.admin;\r\n            }\r\n        });\r\n    },\r\n}\r\n</script>"],"sourceRoot":"src/components"}]}